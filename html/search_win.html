<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<title>title</title>
		<!--<link rel="stylesheet" type="text/css" href="../../css/aui.css"/>-->
		<link rel="stylesheet" type="text/css" href="../css/Hui.css"/>
	</head>
	<body>
		<!--<div class="H-padding-vertical-bottom-10"></div>-->
		<div id='searchBar' class="H-padding-10 H-theme-background-color-white" onclick="" >
			<div class="H-search H-flexbox-horizontal H-box-sizing-border-box H-overflow-hidden H-position-relative">
				<div class="H-position-absolute H-z-index-100 H-width-100-percent H-height-100-percent H-vertical-middle H-text-align-center H-theme-font-color-999 H-border-radius-15" id="ser">
					<span class="H-display-block H-width-100-percent H-font-size-14"><i class="H-iconfont H-icon-search H-font-size-14"></i> 搜索关键字</span>
				</div>
				<input type="text" id="ipt" class="H-border-none  H-theme-background-color-f4f4f4 H-flex-item H-font-size-16 H-padding-horizontal-both-10 H-padding-vertical-both-5 H-border-radius-15" oninput="OnInput (event)" onpropertychange="OnPropChanged (event)"
				value=""  />
				<span class="H-display-block H-font-size-14 H-vertical-middle H-theme-font-color1 H-padding-horizontal-both-10 btn" style="display:none;">取消</span>
			</div>
		</div>
		<div id="list">

			<!--<ul class="aui-list-view" ></ul>-->
		</div>
	</body>
	<script type="text/javascript" src="../script/api.js"></script>
	<script src="../script/H.js" type="text/javascript"></script>
	<script type="text/javascript">
		var songs
		var searchlist = []
		H.D("#ser").addEventListener("touchend", function(e) {
			this.style.cssText = "display:none;";
			H.D(".btn").removeAttribute("style");
			H.D("#ipt").setAttribute("placeholder", "请输入关键字");
		});
		H.D(".btn").addEventListener("touchend", function(e) {
			this.style.cssText = "display:none;";
			H.D("#ipt").setAttribute("placeholder", "");
			H.D("#ser").removeAttribute("style");
			$api.val($api.byId('ipt'), '');
		});
		function OnInput(event) {
			//          alert ( + event.target.value);
			s = event.target.value;
			search(s)
		}
    
		function search(s) {
			var html = '';
			var aa = searchlist.push(s)
			$api.setStorage('search_h', aa);
			var url = sUrl + s + sEnd
			api.ajax({
				url : url,
				dataType : 'json'
			}, function(ret, err) {
				console.log(JSON.stringify(ret))
				if (ret.result) {
					var arr = ret.result.songs;
					var myobj = eval(arr);
					var len = myobj.length;
					var obj = $api.byId('list');
					for (var i = 0; i < arr.length; i++) {
						arr[i].imgPath = arr[i].album.picUrl;
						arr[i].title = arr[i].name;
						arr[i].subTitle = arr[i].artists[0].name;
						var len = myobj.length;
						var bb = arr[i].name;
						var position = myobj[i].no;
						var artists = myobj[i].artists[0].name
						var mp3Url = myobj[i].audio
						var sid = arr[i].id
						var picc = myobj[i].album.picUrl
						var pic = JSON.stringify(picc)
						//				  html += '<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active"  onclick="open(\''+ picc+'\')"  >';
						html += '<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active"  onclick="openww(' + sid + ',\'' + picc + '\',\'' + mp3Url + '\',\'' + bb + '\',\'' + artists + '\')"  >';
						html += '<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">' + bb + '--' + artists + '</div></div>';
						$api.setStorage('ii', i);
					}
					$api.html(obj, html);
					api.refreshHeaderLoadDone();
				} else {
				}
			});
		}

		apiready = function() {
			var html2


		};


		function openww(sid, img, mp3, song, artists) {
			api.openWin({
				name : 'addmusic',
				url : '../html/kong/music/index.html',
				pageParam : {
					name : img,
					mp3 : mp3,·					song : song,
					artists : artists,
					sid : sid
				}
			});
		}
	</script>
</html>
