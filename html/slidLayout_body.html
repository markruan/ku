<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>Hui</title>
		<link href="../css/Hui.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			.H-margin-vertical-top-30 {
				margin-top: 35px;
			}
			#bgg {
				background-image: url(../image/bg.png);
			}
			.H-touch-active {
			}
			.H-touch-active:active {
				background: hsla(14, 100%, 57%, 0.74);
			}
		</style>
	</head>
	<body id="bgg" class="H-theme-background-transparent H-height-100-percent ">
		<div id="icon" onclick="" class="winu-logo H-theme-background H-center-all" style="height: 111px;">
			<img class="H-margin-vertical-top-30" id='imgperson' src="../image/5555.gif" class="H-display-block " />
		</div>
		<hr/ style="height:1px;border:none;border-top:1px solid #D43C33;">
			<div  tapmode="" onclick="openLogin()" class="H-text-list H-flexbox-horizontal  H-theme-background-transparent H-vertical-middle H-touch-active">
				<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-user-set H-font-size-20 H-vertical-middle H-theme-font-color-white"></i></span>
				<div id="uss" class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-theme-font-color-white H-padding-vertical-both-12">
					登陆
				</div>
				<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-white H-font-size-14 H-vertical-middle"></i></span>
			</div>
			<div tapmode="" onclick="code()" class="H-text-list H-flexbox-horizontal  H-theme-background-transparent H-vertical-middle H-touch-active">
				<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-music H-font-size-20 H-vertical-middle H-theme-font-color-white"></i></span>
				<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12 H-theme-font-color-white">
					音乐设置
				</div>
				<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-white H-font-size-14 H-vertical-middle"></i></span>
			</div>
			<div tapmode="" onclick="H.clearCache(function(ret,err){H.D('#cacheSize').innerText='0.0M';H.toast('清除成功！');});" class="H-text-list H-flexbox-horizontal  H-theme-background-transparent H-vertical-middle H-touch-active">
				<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-clear H-font-size-20 H-vertical-middle H-theme-font-color-white"></i></span>
				<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12 H-theme-font-color-white">
					清除缓存
				</div>
				<span class="H-badge H-display-block"><label class="H-display-inline-block H-vertical-middle H-theme-background-color8 H-theme-font-color-white H-font-size-12" id="cacheSize">0.0M</label></span>
				<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-white H-font-size-14 H-vertical-middle"></i></span>
			</div>
			<div tapmode="" onclick="H.openWin('about_win', 'about_win.html');" class="H-text-list H-flexbox-horizontal  H-theme-background-transparent H-vertical-middle H-touch-active">
				<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-group-user H-font-size-20 H-vertical-middle H-theme-font-color-white"></i></span>
				<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12 H-theme-font-color-white">
					关于我们
				</div>
				<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-white H-font-size-14 H-vertical-middle"></i></span>
			</div>
			<div tapmode="" onclick="loginout()" class="H-text-list H-flexbox-horizontal  H-theme-background-transparent H-vertical-middle H-touch-active">
				<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-exit H-font-size-20 H-vertical-middle H-theme-font-color-white"></i></span>
				<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12 H-theme-font-color-white">
					注销
				</div>
				<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-white H-font-size-14 H-vertical-middle"></i></span>
			</div>
			<script src="../script/H.js" type="text/javascript"></script>
			<script src="../script/api.js" type="text/javascript"></script>
			<script type="text/javascript">
				function openk() {
					api.openWin({
						name : 'nn',
						url : 'music/nw.html',
						rect : {
							x : 0,
							y : 0,
							w : api.winWidth,
							h : api.winHeight
						}
					});
				}

				function openLogin() {
					api.openWin({
						name : 'login',
						url : 'entry/entry_head.html'
					});
				}

				function loginout() {
					api.removePrefs({
						key : 'songs'
					});
					api.removePrefs({
						key : "user"
					}, function(ret, err) {
						alert("用户已退出登录");
						api.openWin({
							name : 'login',
							url : 'entry/entry_head.html'
						});
					});
					str2 = '<div class="shelfinfo01">登陆</div>';
					$api.byId('uss').innerHTML = str2;
					$api.rmStorage('icon');
					$api.rmStorage('user');
					api.sendEvent({
						name : 'zhuxiao',
						extra : {
							user : 'ss',
						}
					});
				}

				function login2() {
					api.getPrefs({
						key : 'user'
					}, function(ret, err) {
						var v = ret.value;
						username1 = v
						var val = ret.value;
						if (val && val != "") {
							str1 = '<div class="H-flex-item H-font-size-16  ">' + username1 + '</div>';
							$api.byId('uss').innerHTML = str1;
							var person = $api.byId('icon');
							//$api.attr(person, 'onclick', 'changePerson()');
						} else {
						}
					});
				}

				function addList() {
					api.prompt({
						buttons : ['确定', '取消'],
						title : '请输入ID',
						//text : '',
					}, function(ret, err) {
						var txt = ret.text
						if (txt.length != 0) {
							api.ajax({
								url : hostUrl + 'api/addlist.php',
								method : 'post',
								cache : false,
								timeout : 30,
								dataType : 'json',
								data : {
									values : {
										iid : txt
									}
								}
							}, function(ret, err) {
								if (ret) {
									api.alert({
										msg : '保存成功'
									}, function(ret, err) {
										//coding...
									});
								} else {
									//
								};
							});
						} else {
							api.alert({
								msg : '输入不能为空'
							}, function(ret, err) {
								//coding...
							});
						}
					});
				}

				//			function changePerson() {
				//				api.getPicture({
				//					sourceType : 'library',
				//					encodingType : 'png',
				//					mediaValue : 'pic',
				//					destinationType : 'url',
				//					allowEdit : true,
				//					saveToPhotoAlbum : false
				//				}, function(ret, err) {
				//					if (ret) {
				//						api.showProgress({
				//							title : ' 上传中...',
				//							text : '先喝杯茶...',
				//							modal : false
				//						}), api.ajax({
				//							timeout : 300,
				//							method : 'post',
				//							url : hostUrl + 'api/upload.php',
				//							data : {
				//								files : {
				//									upfile : ret.data
				//								},
				//							},
				//							dataType : 'text',
				//						}, function(ret, err) {
				//							var ttt = hostUrl + 'api/' + ret;
				//							api.hideProgress();
				//							var person = $api.byId('imgperson');
				//							$api.attr(person, 'src', ttt);
				//						});
				//					} else {
				//						api.alert({
				//							msg : err.msg
				//						});
				//					};
				//				});
				//			}
				function code() {
					api.prompt({
						buttons : ['确定', '取消'],
						title : '管理员专用',
						text : ' ',
						//		 type： number,
					}, function(ret, err) {
						if (ret.text == 1123) {
							addList()
						} else {
							alert('密码错误');
						}
					});
				}


				window.onload = function() {
					var clientWidth = document.body.clientWidth;
					document.body.style.width = (clientWidth - 100) + "px";
				};
				H.ready(function() {
					H.getCacheSize(function(ret, err) {
						H.D("#cacheSize").innerText = (ret.size / 1000 / 1000).toFixed(2) + "M";
					});
					login2()
					api.addEventListener({
						name : 'reg_login_successEvent'
					}, function(ret, err) {
						login2()
					});
				});
			</script>
	</body>
</html>