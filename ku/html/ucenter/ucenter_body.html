<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>Hui</title>
		<link href="../../css/Hui.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
		</style>
	</head>
	<body>
		<div class="  H-horizontal-center H-theme-background-color-gray  H-overflow-hidden" style="min-height: 180px; background-image: url(../../image/FM.jpg)">
			<div class="H-overflow-hidden H-max-width-100-percent H-padding-horizontal-both-10 H-box-sizing-border-box">
				<div class="picture H-margin-vertical-top-5 H-position-relative  H-margin-horizontal-auto" style="width: 96px; height: 96px;">
					<span class="H-icon H-display-block H-position-absolute H-center-all H-border-radius-circle H-z-index-1000 H-line-height-0 H-theme-background-color9-active" style="height: 20px; width: 20px; bottom: 5px; right: 5px; "><i onclick="changePerson()" class="H-iconfont H-icon-camera H-theme-font-color-white H-font-size-12 H-vertical-align-middle"></i></span><img id="ico" src="../../image/qq.png" class="H-display-block H-border-radius-circle" alt="" title="" style="width: 90px; height: 90px; border:3px solid rgba(255,255,255,0.3);" />
				</div>
				<strong id="name" class="H-display-block H-font-weight-normal H-font-weight-500 H-font-size-18 H-theme-font-color-white H-text-align-center H-margin-vertical-both-8">酷选</strong>
				<div class="H-font-size-12 H-theme-font-color-white H-text-show-row-1">
					聆听音乐，感悟人生
				</div>
			</div>
		</div>
		<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active">
			<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-profile H-font-size-22 H-vertical-middle H-theme-font-color1"></i></span>
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				个人资料
			</div>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
		</div>
		<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active">
			<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-tip-msg H-font-size-22 H-vertical-middle H-theme-font-color2"></i></span>
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				我的消息
			</div>
			<span class="H-badge H-display-block"><label class="H-display-inline-block H-vertical-middle H-theme-background-color4 H-theme-font-color-white H-font-size-12">99+</label></span>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
		</div>
		<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active">
			<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-weixin H-font-size-22 H-vertical-middle H-theme-font-color6"></i></span>
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				绑定微信
			</div>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
		</div>
		<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active">
			<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-friends H-font-size-22 H-vertical-middle H-theme-font-color7"></i></span>
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				朋友圈
			</div>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
		</div>
		<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
			<span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-where H-font-size-22 H-vertical-middle H-theme-font-color5"></i></span>
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				附近的人
			</div>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
		</div>
		<script src="../../script/H.js" type="text/javascript"></script>
		<script src="../../script/api.js" type="text/javascript"></script>
		<script type="text/javascript">
			function getIcon() {
				api.getPrefs({
					key : 'user'
				}, function(ret, err) {
					var name = ret.value
					 
					api.ajax({
						url : hostUrl + '/userinfo.php',
						dataType : 'json',
						data : {
							values : {
								name : name
							}
						}
					}, function(ret, err) {(
							ret[0].pic)
						var icon = ret[0].pic
						var person = $api.byId('ico');
						$api.attr(person, 'src', icon);
					});
				});
			}

			function changePerson() {
				api.getPicture({
					sourceType : 'library',
					encodingType : 'png',
					mediaValue : 'pic',
					destinationType : 'url',
					allowEdit : true,
					saveToPhotoAlbum : false
				}, function(ret, err) {
					if (ret) {
						api.showProgress({
							title : ' 上传中...',
							text : '先喝杯茶...',
							modal : false
						}), api.ajax({
							timeout : 300,
							method : 'post',
							url : hostUrl + '/upload.php',
							data : {
								files : {
									upfile : ret.data
								},
							},
							dataType : 'text',
						}, function(ret, err) {
							var ttt = hostUrl + '/' + ret;
							api.hideProgress();
							var person = $api.byId('ico');
							$api.attr(person, 'src', ttt);
							 
						   
							api.ajax({
								url : hostUrl + '/updateicon.php',
								data : {
									values : {
										name : $api.getStorage('user'),
										pic : ttt,
									},
								},
							}, function(ret, err) {
								api.toast({
									msg : '更新成功'
								});
							});
						});
					} else {
						api.alert({
							msg : err.msg
						});
					};
				});
			}

			apiready = function() {
				getIcon()
				api.getPrefs({
					key : 'user'
				}, function(ret, err) {
					if (ret) {
						$api.text($api.byId('name'), ret.value);
					}
				});
			}
		</script>
	</body>
</html>